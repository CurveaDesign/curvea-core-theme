@import 'tailwindcss';

@theme {
  /* Fallbacks only â€” actual values are bound to Shopify color schemes in @layer base */
  --cc-bg: #ffffff;
  --cc-surface: #f9fafb;
  --cc-ink: #111827;
  --cc-muted: #6b7280;
  --cc-border: #e5e7eb;
  --cc-accent: #1f2937;

  /* Semantic colors (framework-level, defaults) */
  --cc-success: #16a34a;
  --cc-warning: #f59e0b;
  --cc-danger: #dc2626;
  --cc-info: #2563eb;

  /* Subtle tints for backgrounds (used for badges/alerts) */
  --cc-success-bg: rgba(22, 163, 74, 0.1);
  --cc-warning-bg: rgba(245, 158, 11, 0.12);
  --cc-danger-bg: rgba(220, 38, 38, 0.1);
  --cc-info-bg: rgba(37, 99, 235, 0.1);

  /* Focus ring (will be overridden by scheme binding) */
  --cc-btn-ring: rgba(31, 41, 55, 0.22);

  /* Curvea identity tokens:
     Accent 2 + Accent 3 MUST come from theme settings via theme.liquid :root vars:
     --cc-accent-2: {{ settings.cc_accent_2 }};
     --cc-accent-3: {{ settings.cc_accent_3 }};
  */
  --cc-gradient: linear-gradient(135deg, var(--cc-accent) 0%, var(--cc-accent-2) 45%, var(--cc-accent-3) 100%);

  --cc-glow:
    0 0 0.9rem color-mix(in srgb, var(--cc-accent-2) 22%, transparent),
    0 0 1.6rem color-mix(in srgb, var(--cc-accent-3) 18%, transparent);

  --cc-radius-sm: 0.375rem;
  --cc-radius-md: 0.5rem;
  --cc-radius-lg: 0.75rem;
  --cc-radius-xl: 1rem;
  --cc-radius-2xl: 1.5rem;

  --cc-shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.08);
  --cc-shadow-md: 0 6px 16px rgba(15, 23, 42, 0.12);
  --cc-shadow-lg: 0 16px 32px rgba(15, 23, 42, 0.16);

  /* Button tokens */
  --cc-btn-radius: var(--cc-radius-xl);
  --cc-btn-font-weight: 600;

  --cc-btn-pad-y-sm: 0.5rem;
  --cc-btn-pad-x-sm: 0.875rem;

  --cc-btn-pad-y-md: 0.625rem;
  --cc-btn-pad-x-md: 1.125rem;

  --cc-btn-pad-y-lg: 0.75rem;
  --cc-btn-pad-x-lg: 1.25rem;

  --cc-space-1: 0.25rem;
  --cc-space-2: 0.5rem;
  --cc-space-3: 0.75rem;
  --cc-space-4: 1rem;
  --cc-space-5: 1.25rem;
  --cc-space-6: 1.5rem;
  --cc-space-7: 1.75rem;
  --cc-space-8: 2rem;
  --cc-space-9: 2.5rem;
  --cc-space-10: 3rem;
  --cc-space-11: 3.5rem;
  --cc-space-12: 4rem;

  /* Section rhythm (tokens only) */
  --cc-section-y-sm: 2.5rem; /* 40px */
  --cc-section-y-md: 4rem; /* 64px */
  --cc-section-y-lg: 6rem; /* 96px */

  /* Stack rhythm */
  --cc-stack-1: 0.5rem;
  --cc-stack-2: 0.75rem;
  --cc-stack-3: 1rem;
  --cc-stack-4: 1.5rem;
  --cc-stack-5: 2rem;
  --cc-stack-6: 3rem;

  --cc-container-pad-x: 1.5rem;

  --cc-font-body: var(--font-body-family);
  --cc-font-heading: var(--font-heading-family);

  --cc-text-xs: 0.75rem;
  --cc-text-sm: 0.875rem;
  --cc-text-base: 1rem;
  --cc-text-lg: 1.125rem;
  --cc-text-xl: 1.25rem;
  --cc-text-2xl: 1.5rem;
  --cc-text-3xl: 1.875rem;

  --cc-h1: 2.25rem;
  --cc-h2: 1.875rem;
  --cc-h3: 1.5rem;
  --cc-h4: 1.25rem;
}

@layer base {
  /* Bind Curvea base tokens to the active Shopify color scheme (editor-controlled) */
  .color-background-1,
  .color-background-2,
  .color-inverse {
    --cc-bg: rgb(var(--color-background));
    --cc-ink: rgba(var(--color-foreground), 1);
    --cc-muted: rgba(var(--color-foreground), 0.72);
    --cc-border: rgba(var(--color-foreground), 0.12);

    /* Accent follows scheme button color (editable in theme settings) */
    --cc-accent: rgb(var(--color-button));

    /* Surface derived from bg (works for light + dark) */
    --cc-surface: color-mix(in srgb, rgb(var(--color-background)) 92%, rgba(var(--color-foreground), 1) 8%);

    /* Focus ring derived from accent */
    --cc-btn-ring: color-mix(in srgb, rgb(var(--color-button)) 30%, transparent);
  }

  /* Curvea Core typography scope: only affects Curvea sections/components */
  .cc-root {
    font-family: var(--cc-font-body);
    font-style: var(--font-body-style);
    font-weight: var(--font-body-weight);
    line-height: 1.6;
    color: var(--cc-ink);
  }

  .cc-root h1,
  .cc-root h2,
  .cc-root h3,
  .cc-root h4,
  .cc-root h5,
  .cc-root h6 {
    font-family: var(--cc-font-heading);
    font-style: var(--font-heading-style);
    font-weight: var(--font-heading-weight);
    color: inherit;
    letter-spacing: -0.01em;
  }

  /* Heading sizes: base values multiplied by Dawn scale */
  .cc-root h1 {
    font-size: calc(var(--cc-h1) * var(--font-heading-scale));
    line-height: 1.15;
  }
  .cc-root h2 {
    font-size: calc(var(--cc-h2) * var(--font-heading-scale));
    line-height: 1.2;
  }
  .cc-root h3 {
    font-size: calc(var(--cc-h3) * var(--font-heading-scale));
    line-height: 1.25;
  }
  .cc-root h4 {
    font-size: calc(var(--cc-h4) * var(--font-heading-scale));
    line-height: 1.3;
  }

  /* Text sizes: multiplied by Dawn body scale */
  .cc-root {
    font-size: calc(var(--cc-text-base) * var(--font-body-scale));
  }
  .cc-root .cc-text-sm {
    font-size: calc(var(--cc-text-sm) * var(--font-body-scale));
  }
  .cc-root .cc-text-lg {
    font-size: calc(var(--cc-text-lg) * var(--font-body-scale));
  }

  .cc-root a {
    color: inherit;
    text-decoration: none;
  }

  .cc-root a:hover {
    text-decoration: underline;
  }

  /* Curvea prose rhythm (scoped) */
  .cc-root :where(p) {
    margin: 0;
  }
  .cc-root :where(p + p) {
    margin-top: var(--cc-stack-3);
  }

  .cc-root :where(h1, h2, h3, h4) {
    margin: 0;
  }
  .cc-root :where(h1, h2) {
    margin-bottom: var(--cc-stack-3);
  }
  .cc-root :where(h3, h4) {
    margin-bottom: var(--cc-stack-2);
  }

  .cc-root :where(ul, ol) {
    margin: 0;
    padding-inline-start: 1.25rem;
  }
  .cc-root :where(li + li) {
    margin-top: 0.25rem;
  }
}

@layer components {
  .cc-section {
    background-color: var(--cc-bg);
    padding-block: var(--cc-section-y-md);
  }

  @media (max-width: 749px) {
    .cc-section {
      padding-block: var(--cc-section-y-sm);
    }
  }

  .cc-section--tight {
    padding-block: var(--cc-section-y-sm);
  }
  .cc-section--airy {
    padding-block: var(--cc-section-y-lg);
  }

  .cc-stack {
    display: flex;
    flex-direction: column;
    gap: var(--cc-stack-4);
  }
  .cc-stack--tight {
    gap: var(--cc-stack-2);
  }
  .cc-stack--airy {
    gap: var(--cc-stack-5);
  }

  .cc-card {
    border: 1px solid var(--cc-border);
    border-radius: var(--cc-radius-lg);
    padding: var(--cc-space-6);
    background-color: var(--cc-surface);
    box-shadow: var(--cc-shadow-sm);
  }

  .cc-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--cc-space-2);
    border-radius: var(--cc-btn-radius);
    font-weight: var(--cc-btn-font-weight);
    line-height: 1;
    white-space: nowrap;
    cursor: pointer;
    user-select: none;
    transition:
      background-color 0.2s ease,
      color 0.2s ease,
      border-color 0.2s ease,
      box-shadow 0.2s ease,
      transform 0.06s ease;
  }

  .cc-btn:active {
    transform: translateY(1px);
  }

  .cc-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 4px var(--cc-btn-ring);
  }

  .cc-btn[aria-disabled='true'],
  .cc-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }

  /* Sizes */
  .cc-btn--sm {
    padding: var(--cc-btn-pad-y-sm) var(--cc-btn-pad-x-sm);
    font-size: var(--cc-text-sm);
  }
  .cc-btn--md {
    padding: var(--cc-btn-pad-y-md) var(--cc-btn-pad-x-md);
    font-size: var(--cc-text-sm);
  }
  .cc-btn--lg {
    padding: var(--cc-btn-pad-y-lg) var(--cc-btn-pad-x-lg);
    font-size: var(--cc-text-base);
  }

  /* Variants */
  .cc-btn--primary {
    background-color: var(--cc-accent);
    color: #ffffff;
    border: 1px solid transparent;
  }
  .cc-btn--primary:hover {
    filter: brightness(0.95);
  }

  .cc-btn--secondary {
    background-color: transparent;
    color: var(--cc-accent);
    border: 1px solid var(--cc-border);
  }
  .cc-btn--secondary:hover {
    background-color: color-mix(in srgb, var(--cc-accent) 7%, transparent);
  }

  .cc-btn--ghost {
    background-color: transparent;
    color: var(--cc-ink);
    border: 1px solid transparent;
  }
  .cc-btn--ghost:hover {
    background-color: rgba(17, 24, 39, 0.04);
  }

  .cc-btn--block {
    width: 100%;
  }
}

@layer utilities {
  .cc-muted {
    color: var(--cc-muted);
  }

  .cc-border {
    border-color: var(--cc-border);
  }

  .cc-success {
    color: var(--cc-success);
  }
  .cc-warning {
    color: var(--cc-warning);
  }
  .cc-danger {
    color: var(--cc-danger);
  }
  .cc-info {
    color: var(--cc-info);
  }

  .cc-badge-success {
    background: var(--cc-success-bg);
    color: var(--cc-success);
  }
  .cc-badge-warning {
    background: var(--cc-warning-bg);
    color: var(--cc-warning);
  }
  .cc-badge-danger {
    background: var(--cc-danger-bg);
    color: var(--cc-danger);
  }
  .cc-badge-info {
    background: var(--cc-info-bg);
    color: var(--cc-info);
  }
}
